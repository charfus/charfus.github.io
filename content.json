{"meta":{"title":"Cha","subtitle":"about dev","description":"ê°œë°œì„ ê³µë¶€í•˜ë©° ë¶€ë”ªí˜”ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡í•©ë‹ˆë‹¤","author":"Haneul Cha","url":"https://haneulcha.github.io","root":"/"},"pages":[{"title":"about","date":"2020-09-12T15:37:24.000Z","updated":"2021-01-06T09:28:33.740Z","comments":true,"path":"about/index.html","permalink":"https://haneulcha.github.io/about/index.html","excerpt":"","text":"ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” ì°¨í•˜ëŠ˜ì…ë‹ˆë‹¤. ì¸ìƒì˜ ì§€ì¹¨ì€ ì¼í¬ì¼ë¹„í•˜ì§€ ì•ŠëŠ” ê²ƒâ€¦ ê°œë°œí•˜ë‹¤ê°€ ë§ˆì£¼ì¹œ ë¬¸ì œë“¤ì„ ê¸°ë¡í•˜ê³  ìˆìŠµë‹ˆë‹¤. ( ë¹„ì •ê¸°ì ìœ¼ë¡œâ€¦ )"}],"posts":[{"title":"ë¡œê·¸ì¸ ìœ ì§€ê°€ ë˜ì§€ ì•Šì„ ë•Œ","slug":"ê°„ì‹ íˆ-ë°°í¬í–ˆë”ë‹ˆ-ë¡œê·¸ì¸-ìœ ì§€ê°€-ë˜ì§€-ì•Šì„-ë•Œ","date":"2020-12-31T13:19:24.000Z","updated":"2021-01-06T09:25:23.696Z","comments":true,"path":"2020/12/31/ê°„ì‹ íˆ-ë°°í¬í–ˆë”ë‹ˆ-ë¡œê·¸ì¸-ìœ ì§€ê°€-ë˜ì§€-ì•Šì„-ë•Œ/","link":"","permalink":"https://haneulcha.github.io/2020/12/31/%EA%B0%84%EC%8B%A0%ED%9E%88-%EB%B0%B0%ED%8F%AC%ED%96%88%EB%8D%94%EB%8B%88-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%9C%A0%EC%A7%80%EA%B0%80-%EB%90%98%EC%A7%80-%EC%95%8A%EC%9D%84-%EB%95%8C/","excerpt":"","text":"ë°°í¬í•˜ë ¤ê³  ê³„ì† ìˆ˜ì •í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ì¥ ë§‰ë§‰í–ˆë˜ ë¬¸ì œê°€ ê°„ì‹ íˆ ë©”ì¸ í˜ì´ì§€ê°€ ëœ¨ëŠ” ë°ê¹Œì§€ëŠ” ì„±ê³µí–ˆëŠ”ë° (ê·¸ë˜ì„œ ì´ì œ ì •ë§ ëë‚œ ì¤„ ì•Œì•˜ëŠ”ë°) ë¡œê·¸ì¸ì„ í•´ë³´ë‹ˆ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ëŠ” ìˆœê°„ ë¡œê·¸ì¸ì´ í’€ë ¤ë²„ë¦¬ëŠ” ê²ƒì´ì˜€ë‹¤. ë¶„ëª… ê°œë°œí•  ë•ŒëŠ” ì¿ í‚¤ê°€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ë©´ì„œ ì„¸ì…˜ì—ì„œ ìœ ì € ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆê¸° ë•Œë¬¸ì— ì „í˜€ ì˜ˆìƒ ëª»í•œ ë¬¸ì œì˜€ë‹¤. ê·¼ë° ì •ë§ ë­ê°€ ë¬¸ì œì¸ì§€ ë„ˆë¬´ ë§‰ë§‰í–ˆë‹¤. ì¿ í‚¤ ìœ íš¨ ê¸°ê°„ ë„ˆë¬´ ì§§ì€ê°€ í•´ì„œ ì„¸ì…˜ ì„¤ì •, ì¿ í‚¤ ì„¤ì • ë‹¤ ê±´ë“œë ¤ë³´ê³  ê°’ë„ ë°”ê¿”ë´¤ëŠ”ë° ê·¸ëŒ€ë¡œ ì˜€ë‹¤. redisì— ë¬¸ì œê°€ ìƒê¸´ ê±´ê°€ í•˜ê³  redis ì„¤ì •ë„ ë‹¤ì‹œ í•´ë´¤ë‹¤. ì§€ê¸ˆ ìƒê°í•˜ë‹ˆ ì˜ëª»ëœ ì ‘ê·¼ì´ì˜€ë‹¤. ë¡œê·¸ì¸ ìœ ì§€ê°€ ì•ˆ ë˜ëŠ”ë° ì™œ ì €ì¥ì†Œë“¤ì„ ë“¤ì—¬ë‹¤ë³´ê³  ìˆì–´. ì¿ í‚¤ê°€ ë‚´ ë¸Œë¼ìš°ì €ì— ê³„ì† ë‚¨ì•„ìˆëŠ”ì§€ ì•„ë‹Œì§€ë¶€í„° ë´ì•¼ì§€. ì´ë˜ì„œ 3ì‹œê°„ ì´ìƒ ì—°ì†ìœ¼ë¡œ ì±…ìƒ ì•ì— ì•‰ì•„ ìˆìœ¼ë©´ ì•ˆ ë˜ê³  ë°¤ì—ëŠ” ì ì„ ìì•¼í•œë‹¤. ì•„ë¬´íŠ¼ ê·¸ ë‹¤ìŒ ë‚  ì¼ì–´ë‚˜ì„œ ì´ê²ƒì €ê²ƒ after login cookie disappear, not saved ë­ ì´ëŸ° ë‹¨ì–´ë¡œ ê²€ìƒ‰ì„ í–ˆë‹¤ê°€ ê°„ì‹ íˆ ë°©ë²•ì„ ì°¾ì•˜ë‹¤. ê²°êµ­ â€˜expree-sessionâ€™ ë¬¸ì„œì— í•´ê²° ë°©ë²•ì´ ìˆì—ˆë‹¤. ì„¸ì…˜ ì„¤ì • ì¤‘ cookie.secureëŠ” trueì¼ ê²½ìš°, Secureë¥¼ ì„¤ì •í•œë‹¤. ì¦‰, HTTPS ì—°ê²°ì´ ì•„ë‹Œ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ë¡œ cookieë¥¼ ë³´ë‚´ì§€ ëª»í•˜ê³ , cookieê°€ ì„¸íŒ…ë˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ë§Œ, í”„ë¡ì‹œë¡œ nodejs ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ì´ ì¡°ê±´ì„ trueë¡œ ì„¸íŒ…í•œ ê²½ìš°ì— ìµìŠ¤í”„ë ˆìŠ¤ì—ì„œ â€œtrust proxyâ€ë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤. 12345678var app &#x3D; express()app.set(&#39;trust proxy&#39;, 1) &#x2F;&#x2F; trust first proxyapp.use(session(&#123; secret: &#39;keyboard cat&#39;, resave: false, saveUninitialized: true, cookie: &#123; secure: true &#125;&#125;)) ê·¸ ì™¸ì— autoë¡œë„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.","categories":[{"name":"Post","slug":"Post","permalink":"https://haneulcha.github.io/categories/Post/"}],"tags":[{"name":"project","slug":"project","permalink":"https://haneulcha.github.io/tags/project/"},{"name":"galpi","slug":"galpi","permalink":"https://haneulcha.github.io/tags/galpi/"},{"name":"deploy","slug":"deploy","permalink":"https://haneulcha.github.io/tags/deploy/"}]},{"title":"CSP(Content Security Policy)","slug":"CSP-Content-Security-Policy","date":"2020-12-26T11:00:19.000Z","updated":"2020-12-26T11:38:55.552Z","comments":true,"path":"2020/12/26/CSP-Content-Security-Policy/","link":"","permalink":"https://haneulcha.github.io/2020/12/26/CSP-Content-Security-Policy/","excerpt":"","text":"ê²°ë¡ ì„œë²„ì—ì„œ helmet ë©”ì†Œë“œë¡œ ì„¤ì •í•  ìˆ˜ ìˆì—ˆë‹¤.","categories":[{"name":"Post","slug":"Post","permalink":"https://haneulcha.github.io/categories/Post/"}],"tags":[{"name":"project","slug":"project","permalink":"https://haneulcha.github.io/tags/project/"},{"name":"galpi","slug":"galpi","permalink":"https://haneulcha.github.io/tags/galpi/"},{"name":"deploy","slug":"deploy","permalink":"https://haneulcha.github.io/tags/deploy/"}]},{"title":"Global Object Id","slug":"Global-Object-Id","date":"2020-10-19T13:43:20.000Z","updated":"2020-12-26T10:38:00.000Z","comments":true,"path":"2020/10/19/Global-Object-Id/","link":"","permalink":"https://haneulcha.github.io/2020/10/19/Global-Object-Id/","excerpt":"","text":"20ë…„ 10ì›” 19ì¼ 22ì‹œ 43ë¶„ í˜„ì¬ ë‚´ê°€ ì²˜í•œ ìƒí™©:ì‚¬ëŒë“¤ì´ ì˜¬ë¦´ ê° í¬ìŠ¤íŠ¸ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” urlì´ í•„ìš”í•˜ë‹¤. ë¬´ì—‡ì„ í¬ìŠ¤íŠ¸ì˜ ê³ ìœ í•œ ì‹ë³„ìë¡œ í•˜ì§€. mongoDBì˜ _idë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œ ì‹œí‚¤ê¸°ëŠ” ë­”ê°€ ì°œì°œí•˜ë‹¤. ìœ ì € í”„ë¡œí•„ì˜ ê²½ìš°ì—” ê·¸ëƒ¥ usernameìœ¼ë¡œ í–ˆëŠ”ë°â€¦ ì¸ìŠ¤íƒ€ì— ë“¤ì–´ê°€ì„œ í¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í•´ë³´ë‹ˆ ë³´ë‹ˆ ê·¸ë¦¬ ê¸¸ì§€ ì•Šì€ ê³ ìœ  ì•„ì´ë””ë¥¼ urlë¡œ ì“°ê³  ìˆë‹¤. ì–´ì°Œì €ì°Œ ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ í‚¤ì›Œë“œëŠ” â€˜global object idâ€™ ì •ë„ì¸ ê²ƒ ê°™ê³ , â€˜auto incrementâ€™ì— ëŒ€í•œ í¬ìŠ¤íŒ…ê³¼ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì˜ ì§ˆë¬¸ë“¤ë„ ë°œê²¬í–ˆë‹¤. â€˜ì¸ë±ìŠ¤â€™ì™€ â€˜ìƒ¤ë”©â€™ì€ ì•„ì§ ì–´ë””ì— ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤.ê·¸ë¦¬ê³  â€˜shortidâ€™ë¼ëŠ” npm íŒ¨í‚¤ì§€ë„ ë°œê²¬í–ˆë‹¤. í•´ê²°í•˜ìâ€¦ 12ì›” 26ì¼ ë°°í¬ê¹Œì§€ ëë‚œ ì‹œì :ì´ ê³ ë¯¼ì€ ì‚¬ì‹¤ ë³„ ê±´ ì•„ë‹ˆì˜€ë‹¤. nanoid, shortid, uuid ë“± ê·¸ëƒ¥ ëª©ì ì— ë§ëŠ” uuid íŒ¨í‚¤ì§€ë¥¼ ê²€ìƒ‰í•´ì„œ schemaì—ì„œ uuid ìƒì„± í•¨ìˆ˜ë¥¼ ì ìš©í•˜ë‹ˆ í•´ê²°ë˜ì—ˆë‹¤. mongoDBì—ì„œ ì›ë˜ ìë™ ìƒì„±ë˜ëŠ” _idë¥¼ ëŒ€ì‹ í•´ì„œ uuidë¥¼ ì“°ëŠ” ê²ƒë„ ê°€ëŠ¥í•œë° ë‚˜ëŠ” uuid í”„ë¡œí¼í‹°ë¥¼ ë”°ë¡œ ì¶”ê°€í–ˆë‹¤. ì²˜ìŒì— ì™œ _idë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ê²Œ ì°œì°œí–ˆëŠ”ì§€ëŠ” ë‚˜ë„ ì˜ ëª¨ë¥´ê² ë‹¤. ì´í›„ì— ì •ë ¬ì„ í•´ì•¼í•  ì¼ì´ ìƒê¸¸ì§€ë„ ëª¨ë¥´ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ uuidì™€ ë³„ê°œë¡œ indexë¥¼ ì¶”ê°€í•´ì„œ, ìœ ì €ê°€ í¬ìŠ¤íŒ… í•  ë•Œë§ˆë‹¤ increment ë˜ë„ë¡ mongoDB ì¿¼ë¦¬ë¥¼ ë’¤ì ¸ì„œ í•¨ìˆ˜ë¥¼ ì‘ì„±í–ˆë‹¤. 12345const index &#x3D; await Sequence.findOneAndUpdate( &#123; user &#125;, &#123; $inc: &#123; uid: 1 &#125; &#125;, &#123; new: true &#125; ); ê°œë°œ ì¤‘ê°„ì— ì•Œì•„ì°¨ë¦° ì‹¤ìˆ˜ëŠ” uuid ìƒì„± í•¨ìˆ˜ë¥¼ ë”¸ë‘ ì“°ë©´ ì•ˆ ë˜ê³ , ì½œë°±ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ëŠ” ì ì´ì˜€ë‹¤. ì²˜ìŒì— ë”¸ë‘ nanoid() ì´ë ‡ê²Œë§Œ ì¼ë‹¤ê°€ ëª¨ë“  í¬ìŠ¤íŠ¸ì˜ uuidê°€ ë™ì¼í•´ì¡Œê³ , ì •ë°˜ëŒ€ì˜ ëª©ì ìœ¼ë¡œ uuidë¥¼ í™œìš©í•œ ê¼´ì´ ë˜ì—ˆë‹¤. 12345678const postSchema &#x3D; new Schema(&#123; ... uuid: &#123; type: String, default: () &#x3D;&gt; nanoid(), &#125;, ...&#125; ê²°ê³¼ì ìœ¼ë¡œ ëª¨ë“  í¬ìŠ¤íŠ¸ê°€ /p/:uuid ì£¼ì†Œë¡œ ê°ê° urlì„ ê°–ê²Œ ë˜ì—ˆë‹¤.","categories":[{"name":"Post","slug":"Post","permalink":"https://haneulcha.github.io/categories/Post/"}],"tags":[{"name":"mongoDB","slug":"mongoDB","permalink":"https://haneulcha.github.io/tags/mongoDB/"},{"name":"project","slug":"project","permalink":"https://haneulcha.github.io/tags/project/"},{"name":"galpi","slug":"galpi","permalink":"https://haneulcha.github.io/tags/galpi/"}]},{"title":"ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì—ˆë‹¤","slug":"ë¸”ë¡œê·¸ë¥¼-ë§Œë“¤ì—ˆë‹¤","date":"2020-09-13T01:59:00.000Z","updated":"2020-09-15T02:23:56.711Z","comments":true,"path":"2020/09/13/ë¸”ë¡œê·¸ë¥¼-ë§Œë“¤ì—ˆë‹¤/","link":"","permalink":"https://haneulcha.github.io/2020/09/13/%EB%B8%94%EB%A1%9C%EA%B7%B8%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%97%88%EB%8B%A4/","excerpt":"","text":"ì¸í„°ë„·ì„ ì ‘í•œì§€ 20ë…„ì´ ë‹¤ ë˜ì–´ê°€ê³ , ê·¸ ë™ì•ˆ ìŠ¤ì³ì§€ë‚˜ê°„ ê°œì¸ í™ˆí˜ì´ì§€, ë¯¸ë‹ˆí™ˆí”¼, ë¸”ë¡œê·¸ê°€ ìˆ˜ì‹­ ê°œë‹¤â€¦ê·¸ ì¤‘ í•˜ë‚˜ë§Œ ì§„ë“í•˜ê²Œ í–ˆë”ë¼ë©´â€¦ (ì‚¬ì‹¤ í¬ê²Œ ë‹¬ë¼ì§„ ê²ƒ ì—†ì—ˆê² ì§€ë§Œâ€¦)ë‹¤ í° ì„±ì¸ì´ ë˜ê³ ë‚˜ì„œë„ í•œì°¸ í›„ì—ì•¼ ì´ë ‡ê²Œ ë˜ ë¸”ë¡œê·¸ë¥¼ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤.ì´ë²ˆì—ëŠ” ë˜ ì–¼ë§ˆë‚˜ ê°€ë ¤ë‚˜.. ë¼ëŠ” ìƒê°ì€ í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ì´ê²ƒì €ê²ƒ ê¸°ë¡ì„ í•´ë³´ê² ë‹¤.ëŒ€ì‹  ì¢€ ë” ì±…ì„ê° ìˆëŠ” í¬ìŠ¤íŒ…ì´ ë˜ê¸¸ ë°”ë¼ê³  ìŠ¤ìŠ¤ë¡œ ë‹¤ì§â€¦ğŸ‘´","categories":[{"name":"Post","slug":"Post","permalink":"https://haneulcha.github.io/categories/Post/"}],"tags":[]}],"categories":[{"name":"Post","slug":"Post","permalink":"https://haneulcha.github.io/categories/Post/"}],"tags":[{"name":"project","slug":"project","permalink":"https://haneulcha.github.io/tags/project/"},{"name":"galpi","slug":"galpi","permalink":"https://haneulcha.github.io/tags/galpi/"},{"name":"deploy","slug":"deploy","permalink":"https://haneulcha.github.io/tags/deploy/"},{"name":"mongoDB","slug":"mongoDB","permalink":"https://haneulcha.github.io/tags/mongoDB/"}]}